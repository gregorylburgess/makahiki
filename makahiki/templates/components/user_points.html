{% load class_tags %}
{% load cache %}

{% cache 600 infobar request.user.username %}
{% if CURRENT_ROUND_INFO and CURRENT_ROUND_INFO.name != 'Overall' %}
<!-- First slideshow element -->
<div id="header-user-overall-rank1">
    <ul>
        <li>{{CURRENT_ROUND_INFO.name}}: {{profile.current_round_points}} {{COMPETITION_POINT_LABEL}}s #{{profile.current_round_team_rank}}/{{TEAM_MEMBER_COUNT}} in {{profile.team.name}}.</li>
    </ul>
</div>
<!-- Second slideshow element -->
<div id="header-user-overall-rank2">
    <ul>
        <li>{{CURRENT_ROUND_INFO.name}}: {{profile.current_round_points}} {{COMPETITION_POINT_LABEL}}s #{{profile.current_round_overall_rank}}/{{OVERALL_MEMBER_COUNT}} overall.</li>
    </ul>        
</div>
{% endif %}
<!-- Third slideshow element -->
<div id="header-user-team-rank3">
  <ul>
    <li>Overall: {{profile.points}} {{COMPETITION_POINT_LABEL}}s #{{profile.team_rank}}/{{TEAM_MEMBER_COUNT}} in {{profile.team.name}}</li>
  </ul>
</div>
<!-- Fourth slideshow element -->
<div id="header-user-overall-rank4">
    <ul>
        <li>Overall: {{profile.points}} {{COMPETITION_POINT_LABEL}}s #{{profile.overall_rank}}/{{OVERALL_MEMBER_COUNT}}</li>
    </ul>
</div>

{% if profile.canopy_member %}
<!-- Fifth slideshow element -->
{% with canopy_info=profile.canopy_karma_info %}
<div id="header-user-overall-rank5" style="display:none">
  <div {% get_id_and_classes "header-user-points" %}>
    <h3>{{profile.canopy_karma}}</h3>
    <div {% get_id_and_classes "header-text" %}>Canopy Karma points</div>
  </div>
  <div {% get_id_and_classes "header-user-rank" %}>
    <h3>#{{canopy_info.rank}}</h3>
    <div {% get_id_and_classes "header-text" %}>out of {{canopy_info.total}} overall</div>
  </div>
</div>
{% endwith %}
{% endif %}

{% endcache %}